<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cms.dao.DepartQueryDao">
    <select id="departQuery" parameterType="String"
            resultType="com.cms.pojo.DepartQueryReturnPojo">
        SELECT t1.agent_code,
               t1.agent_name,
               t2.manage_com,
               (SELECT yl_name FROM ld_com_new WHERE ld_com_new.com_code=t2.manage_com) AS manageComName,
               t2.branch_attr,
               t2.branch_name,
               (SELECT grade_name FROM la_agent_grade WHERE la_agent_grade.grade_code=t1.agent_grade) AS gradeName
        FROM yl_la_agent AS t1
            JOIN yl_la_branch_group AS t2 ON t2.agent_group=t1.agent_group
            ${ew.customSqlSegment}
    </select>
</mapper>