(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3470f180"],{"0a51":function(e,t,a){"use strict";var r=a("1c8b"),o=a("1e2c"),n=a("d890"),l=a("faa8"),i=a("a719"),s=a("d910").f,c=a("c69d"),f=n.Symbol;if(o&&"function"==typeof f&&(!("description"in f.prototype)||void 0!==f().description)){var u={},m=function(){var e=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),t=this instanceof m?new f(e):void 0===e?f():f(e);return""===e&&(u[t]=!0),t};c(m,f);var d=m.prototype=f.prototype;d.constructor=m;var p=d.toString,g="Symbol(test)"==String(f("test")),h=/^Symbol\((.*)\)[^)]+$/;s(d,"description",{configurable:!0,get:function(){var e=i(this)?this.valueOf():this,t=p.call(e);if(l(u,e))return"";var a=g?t.slice(7,-1):t.replace(h,"$1");return""===a?void 0:a}}),r({global:!0,forced:!0},{Symbol:m})}},"30d5":function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));a("f3dd"),a("0a51"),a("e18c"),a("9b11"),a("96db"),a("af86"),a("77ad"),a("053b"),a("98e0");function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function o(e,t){if(e){if("string"===typeof e)return r(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?r(e,t):void 0}}function n(e,t){var a="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=o(e))||t&&e&&"number"===typeof e.length){a&&(e=a);var r=0,n=function(){};return{s:n,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,i=!0,s=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return i=e.done,e},e:function(e){s=!0,l=e},f:function(){try{i||null==a["return"]||a["return"]()}finally{if(s)throw l}}}}},"47d5":function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"b",(function(){return n}));var r=a("b775");function o(){return Object(r["a"])({url:"/start/get",method:"post"})}function n(){return Object(r["a"])({url:"/get/managecom",method:"post"})}},"69c5":function(e,t,a){var r=a("857c");e.exports=function(e,t,a,o){try{return o?t(r(a)[0],a[1]):t(a)}catch(l){var n=e["return"];throw void 0!==n&&r(n.call(e)),l}}},"77ad":function(e,t,a){"use strict";var r=a("1c8b"),o=a("a719"),n=a("74e7"),l=a("e1d6"),i=a("d88d"),s=a("da10"),c=a("1bbd"),f=a("90fb"),u=a("1ea7"),m=a("ff9c"),d=u("slice"),p=m("slice",{ACCESSORS:!0,0:0,1:2}),g=f("species"),h=[].slice,b=Math.max;r({target:"Array",proto:!0,forced:!d||!p},{slice:function(e,t){var a,r,f,u=s(this),m=i(u.length),d=l(e,m),p=l(void 0===t?m:t,m);if(n(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!n(a.prototype)?o(a)&&(a=a[g],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return h.call(u,d,p);for(r=new(void 0===a?Array:a)(b(p-d,0)),f=0;d<p;d++,f++)d in u&&c(r,f,u[d]);return r.length=f,r}})},"91ef":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("h4",[e._v("离司申请")]),a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"180px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"管理机构",prop:"manageCom"}},[a("el-cascader",{ref:"elcascader",staticStyle:{width:"100%"},attrs:{options:e.options,"show-all-levels":!1,props:{expandTrigger:"hover",checkStrictly:!0},clearable:""},on:{change:e.changeVal,blur:e.changeValBind},model:{value:e.form.manageCom,callback:function(t){e.$set(e.form,"manageCom",t)},expression:"form.manageCom"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"团队代码",prop:"agentGroup"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.agentGroup,callback:function(t){e.$set(e.form,"agentGroup",t)},expression:"form.agentGroup"}},e._l(e.branchAttr,(function(t,r){return a("el-option",{key:r,attrs:{label:t.branchAttr,value:t.branchAttr}},[a("span",{staticStyle:{float:"right",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.name))]),a("span",{staticStyle:{float:"left"}},[e._v(e._s(t.branchAttr))])])})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"团队名称",prop:"branchName"}},[a("el-input",{attrs:{placeholder:"请输入团队名称",clearable:""},model:{value:e.form.branchName,callback:function(t){e.$set(e.form,"branchName",t)},expression:"form.branchName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"人员代码",prop:"agentCode"}},[a("el-input",{attrs:{placeholder:"请输入代理人代码",clearable:""},model:{value:e.form.agentCode,callback:function(t){e.$set(e.form,"agentCode",t)},expression:"form.agentCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"人员姓名",prop:"agentName"}},[a("el-input",{attrs:{placeholder:"请输入代理人姓名",clearable:""},model:{value:e.form.agentName,callback:function(t){e.$set(e.form,"agentName",t)},expression:"form.agentName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"职级",prop:"agentGrade"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.agentGrade,callback:function(t){e.$set(e.form,"agentGrade",t)},expression:"form.agentGrade"}},e._l(e.agentGradeList,(function(t){return a("el-option",{key:t.gradecode,attrs:{value:t.gradecode,label:t.gradename}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.gradecode))]),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.gradename))])])})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"审核状态",prop:"agydepart"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.agydepart,callback:function(t){e.$set(e.form,"agydepart",t)},expression:"form.agydepart"}},e._l(e.AgydepartList,(function(t,r){return a("el-option",{key:r,attrs:{value:t.value,label:t.label}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.value))]),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.label))])])})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"解约原因",prop:"diffCause"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择",clearable:""},model:{value:e.form.diffCause,callback:function(t){e.$set(e.form,"diffCause",t)},expression:"form.diffCause"}},e._l(e.DiffCauseList,(function(t,r){return a("el-option",{key:r,attrs:{value:t.value,label:t.label}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.value))]),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.label))])])})),1)],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"解约日期起期",prop:"diffStartDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},on:{change:e.dateCheck},model:{value:e.form.diffStartDate,callback:function(t){e.$set(e.form,"diffStartDate",t)},expression:"form.diffStartDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"解约日期止期",prop:"diffEndDate"}},[a("el-date-picker",{staticStyle:{width:"100%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},on:{change:e.dateCheck},model:{value:e.form.diffEndDate,callback:function(t){e.$set(e.form,"diffEndDate",t)},expression:"form.diffEndDate"}})],1)],1)],1),a("el-row",[a("el-form-item",[a("el-col",{staticStyle:{"text-align":"left","margin-top":"1rem"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.page.currentPage=1,e.handleQuery()}}},[e._v("查询")]),a("el-button",{attrs:{type:"success",icon:"el-icon-edit"},on:{click:e.LeaveAddDialogVisible}},[e._v("新增")]),a("el-button",{attrs:{type:"warning",icon:"el-icon-check",disabled:0===e.selected.length},on:{click:e.Submit}},[e._v("提交审核")]),a("el-button",{attrs:{type:"secondary",icon:"el-icon-refresh-left"},on:{click:e.resetForm}},[e._v("重置")])],1)],1)],1)],1),a("el-divider"),a("div",[a("el-table",{ref:"multipleTable",attrs:{data:e.table,stripe:"",border:"",fit:"",height:"300"},on:{"selection-change":e.handleSelectChange}},[a("el-table-column",{attrs:{type:"selection",width:"40",selectable:e.selectEnable}}),a("el-table-column",{attrs:{label:"人员代码",prop:"agentCode"}}),a("el-table-column",{attrs:{label:"人员姓名",prop:"agentName"}}),a("el-table-column",{attrs:{label:"管理机构代码",prop:"comCode4"}}),a("el-table-column",{attrs:{label:"管理机构名称",prop:"manageCom4"}}),a("el-table-column",{attrs:{label:"团队代码",prop:"agentGroup"}}),a("el-table-column",{attrs:{label:"团队名称",prop:"branchName"}}),a("el-table-column",{attrs:{label:"职级",prop:"agentGradeName"}}),a("el-table-column",{attrs:{label:"解约日期",prop:"diffDate"}}),a("el-table-column",{attrs:{label:"解约原因",prop:"diffCauseName"}}),a("el-table-column",{attrs:{label:"说明",prop:"illustrate"}}),a("el-table-column",{attrs:{label:"审核状态",prop:"agentStateName"}}),a("el-table-column",{attrs:{label:"操作",prop:"operator"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.LeaveAddDialog(t.row)}}},[e._v("修改")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"text-align":"right","margin-top":"1rem"}},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":[10,20,50,100,200,500],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.totalCount},on:{"update:currentPage":function(t){return e.$set(e.page,"currentPage",t)},"update:current-page":function(t){return e.$set(e.page,"currentPage",t)},"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),a("ADD"),a("MODIFY")],1)},o=[],n=a("30d5"),l=a("7e2d"),i=(a("08ba"),a("fe8a"),a("47d5")),s=a("bbbc"),c=a("f713"),f=a("e8b8"),u=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"新增",visible:e.config.dialogFormVisible,"before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.config,"dialogFormVisible",t)}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"130px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"人员代码",prop:"agentCode"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off"},on:{blur:function(t){return e.getInformation(e.form.agentCode)}},model:{value:e.form.agentCode,callback:function(t){e.$set(e.form,"agentCode",t)},expression:"form.agentCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"人员姓名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.agentName,callback:function(t){e.$set(e.form,"agentName",t)},expression:"form.agentName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"管理机构代码"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.comCode4,callback:function(t){e.$set(e.form,"comCode4",t)},expression:"form.comCode4"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"管理机构名称"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.manageCom4,callback:function(t){e.$set(e.form,"manageCom4",t)},expression:"form.manageCom4"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"团队代码"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.agentGroup,callback:function(t){e.$set(e.form,"agentGroup",t)},expression:"form.agentGroup"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"团队名称"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.branchName,callback:function(t){e.$set(e.form,"branchName",t)},expression:"form.branchName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职级"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.agentGrade,callback:function(t){e.$set(e.form,"agentGrade",t)},expression:"form.agentGrade"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"解约日期",prop:"diffDate"}},[a("el-date-picker",{staticStyle:{width:"80%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.diffDate,callback:function(t){e.$set(e.form,"diffDate",t)},expression:"form.diffDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"解约原因",prop:"diffCause"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择解约原因"},model:{value:e.form.diffCause,callback:function(t){e.$set(e.form,"diffCause",t)},expression:"form.diffCause"}},e._l(e.list.departReason,(function(t,r){return a("el-option",{key:r,attrs:{label:t.name,value:t.code}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.code))]),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.name))])])})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"说明"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.form.explain,callback:function(t){e.$set(e.form,"explain",t)},expression:"form.explain"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary",disabled:e.flag},on:{click:e.submit}},[e._v("确 定")])],1)],1)},m=[],d={name:"LeaveAddDialog",data:function(){return{config:{dialogFormVisible:!1},rules:{agentCode:[{required:!0,message:"请输入人员代码",trigger:"blur"}],diffCause:[{required:!0,message:"请选择离职原因",trigger:"change"}],diffDate:[{required:!0,message:"请选择离职日期",trigger:"change"}]},flag:!0,form:{agentCode:"",agentName:"",comCode4:"",manageCom4:"",agentGroup:"",branchName:"",agentGrade:"",diffDate:"",diffCause:"",explain:"",agentState:"",operator:"admin"},list:{departReason:[{code:"01",name:"主动离职"},{code:"02",name:"单方解除"},{code:"03",name:"协商解除"},{code:"04",name:"外勤转内勤"}]}}},mounted:function(){var e=this;this.$bus.$on("ADD_DIALOG",(function(){e.config.dialogFormVisible=!0}))},methods:{getInformation:function(e){var t=this;Object(c["b"])({agentCode:e}).then((function(e){t.flag=0!==e.code,t.form.agentName=e.list.agentName,t.form.comCode4=e.list.manageCom,t.form.manageCom4=e.list.ylName,t.form.agentGroup=e.list.branchAttr,t.form.branchName=e.list.branchName,t.form.agentGrade=e.list.agentGrade})).catch((function(){t.flag=!0,t.form.agentName="",t.form.comCode4="",t.form.manageCom4="",t.form.agentGroup="",t.form.branchName="",t.form.agentGrade=""}))},handleClose:function(){var e=this;this.form.agentCode="",this.form.agentName="",this.form.comCode4="",this.form.manageCom4="",this.form.agentGroup="",this.form.branchName="",this.form.agentGrade="",this.form.diffDate="",this.form.diffCause="",this.form.explain="",this.$nextTick((function(){e.$refs["form"].clearValidate()})),this.config.dialogFormVisible=!1},submit:function(){var e=this,t={agentCode:this.form.agentCode,departData:this.form.diffDate,departReason:this.form.diffCause,noti:this.form.explain,manageCom:"4",agentGroup:this.form.agentGroup,departTimes:"0",departState:"1",operator:"admin"};Object(c["d"])(t).then((function(){e.$message.success("新增成功"),e.$bus.$emit("REFRESH_LEAVE"),e.config.dialogFormVisible=!1})),this.form.agentCode="",this.form.agentName="",this.form.comCode4="",this.form.manageCom4="",this.form.agentGroup="",this.form.branchName="",this.form.agentGrade="",this.form.diffDate="",this.form.diffCause="",this.form.explain="",this.$nextTick((function(){e.$refs["form"].clearValidate()}))}}},p=d,g=a("5d22"),h=Object(g["a"])(p,u,m,!1,null,null,null),b=h.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-dialog",{attrs:{title:"修改",visible:e.config.dialogFormVisible,"before-close":e.handleClose},on:{"update:visible":function(t){return e.$set(e.config,"dialogFormVisible",t)}}},[a("el-form",{ref:"modifyDialog",attrs:{model:e.form,"label-width":"130px",rules:e.rules}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"人员代码"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.agentCode,callback:function(t){e.$set(e.form,"agentCode",t)},expression:"form.agentCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"人员姓名"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.agentName,callback:function(t){e.$set(e.form,"agentName",t)},expression:"form.agentName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"管理机构代码"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.comCode4,callback:function(t){e.$set(e.form,"comCode4",t)},expression:"form.comCode4"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"管理机构名称"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.manageCom4,callback:function(t){e.$set(e.form,"manageCom4",t)},expression:"form.manageCom4"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"团队代码"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.agentGroup,callback:function(t){e.$set(e.form,"agentGroup",t)},expression:"form.agentGroup"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"团队名称"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.branchName,callback:function(t){e.$set(e.form,"branchName",t)},expression:"form.branchName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"职级"}},[a("el-input",{staticStyle:{width:"80%"},attrs:{autocomplete:"off",disabled:!0},model:{value:e.form.agentGrade,callback:function(t){e.$set(e.form,"agentGrade",t)},expression:"form.agentGrade"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"解约日期",prop:"diffDate"}},[a("el-date-picker",{staticStyle:{width:"80%"},attrs:{type:"date",placeholder:"选择日期","value-format":"yyyy-MM-dd"},model:{value:e.form.diffDate,callback:function(t){e.$set(e.form,"diffDate",t)},expression:"form.diffDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"解约原因",prop:"diffCause"}},[a("el-select",{staticStyle:{width:"80%"},attrs:{placeholder:"请选择解约原因"},model:{value:e.form.diffCause,callback:function(t){e.$set(e.form,"diffCause",t)},expression:"form.diffCause"}},e._l(e.list.departReason,(function(t,r){return a("el-option",{key:r,attrs:{label:t.name,value:t.code}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.code))]),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.name))])])})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:23}},[a("el-form-item",{attrs:{label:"说明"}},[a("el-input",{attrs:{type:"textarea",rows:4,placeholder:"请输入内容"},model:{value:e.form.explain,callback:function(t){e.$set(e.form,"explain",t)},expression:"form.explain"}})],1)],1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.handleClose}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("确 定")])],1)],1)},y=[],C={name:"LeaveModifyDialog",data:function(){return{config:{dialogFormVisible:!1},rules:{diffCause:[{required:!0,message:"请选择离职原因",trigger:"change"}],diffDate:[{required:!0,message:"请选择离职日期",trigger:"change"}]},form:{agentCode:"",agentName:"",comCode4:"",manageCom4:"",agentGroup:"",branchName:"",agentGrade:"",diffDate:"",diffCause:"",explain:"",agentState:"",operator:"admin",diffCauseName:""},list:{departReason:[{code:"01",name:"主动离职"},{code:"02",name:"单方解除"},{code:"03",name:"协商解除"},{code:"04",name:"外勤转内勤"}]}}},mounted:function(){var e=this;this.$bus.$on("MODIFY_DIALOG",(function(t){console.log("item:",t),e.form.agentCode=t.agentCode,e.form.agentName=t.agentName,e.form.comCode4=t.comCode4,e.form.manageCom4=t.manageCom4,e.form.agentGroup=t.agentGroup,e.form.branchName=t.branchName,e.form.agentGrade=t.agentGradeName,e.form.diffDate=t.diffDate,e.form.diffCause=t.diffCauseCom,e.form.diffCauseName=t.diffCauseName,e.form.explain=t.illustrate,e.config.dialogFormVisible=!0}))},methods:{handleClose:function(){var e=this;this.config.dialogFormVisible=!1,this.form.diffDate="",this.form.diffCause="",this.form.explain="",this.$nextTick((function(){e.$refs["modifyDialog"].clearValidate()}))},submit:function(){var e=this,t={agentCode:this.form.agentCode,diffDate:this.form.diffDate,diffCause:this.form.diffCause,explain:this.form.explain};Object(c["e"])(t).then((function(){e.$message.success("修改成功"),e.$bus.$emit("REFRESH_LEAVE"),e.config.dialogFormVisible=!1})),this.form.diffDate="",this.form.diffCause="",this.form.explain="",this.$nextTick((function(){e.$refs["modifyDialog"].clearValidate()}))}}},S=C,x=Object(g["a"])(S,v,y,!1,null,null,null),$=x.exports,D={name:"LeaveCompany",components:{ADD:b,MODIFY:$},data:function(){return{form:{manageCom:"",agentGroup:"",branchName:"",agentCode:"",agentName:"",agentGrade:"",agydepart:"",diffCause:"",diffStartDate:"",diffEndDate:""},branchAttr:[],branchName:[],AgydepartList:[],DiffCauseList:[],agentGradeList:[],rules:{},page:{currentPage:1,totalCount:0,pageSize:10},options:[],table:[],selected:[]}},created:function(){var e=this;this.getInitOptions(),this.getCurAgentGrade(),s["e"]().then((function(t){e.options.push(t.result)}))},mounted:function(){var e=this;this.$bus.$on("REFRESH_LEAVE",(function(){e.handleQuery()})),setInterval((function(){document.querySelectorAll(".el-cascader-node__label").forEach((function(e){e.onclick=function(){this.previousElementSibling&&this.previousElementSibling.click()}}))}),1e3)},beforeDestroy:function(){this.$bus.$off("REFRESH_LEAVE")},methods:{handleQuery:function(){var e=this;this.table=[];var t=Object(l["a"])({},this.form);t.manageCom=0!==this.form.manageCom.length?this.form.manageCom[this.form.manageCom.length-1]:"",c["a"](t,{pageSize:this.page.pageSize,currentPage:this.page.currentPage}).then((function(t){e.table=t["list"],e.page.totalCount=t["totalCount"],e.$message.success("查询完毕")})).catch((function(t){e.page.totalCount=0}))},changeVal:function(){var e,t=this;clearTimeout(e),e=setTimeout((function(){t.$refs.elcascader.dropDownVisible=!1}),300),this.form.agentGroup=""},changeValBind:function(){var e=this;Object(f["b"])(this.form.manageCom).then((function(t){e.branchAttr=t.list}))},dateCheck:function(){0!==this.form.diffStartDate.length&&0!==this.form.diffEndDate.length&&this.form.diffStartDate>this.form.diffEndDate&&(this.$message.error("终止日期不能小于起始时期"),this.form.diffEndDate="")},getInitOptions:function(){var e=this;i["a"]().then((function(t){e.codes=t["resource"],e.fillCodes()}))},fillCodes:function(){this.codes?(this.setCodes("agydepartstate",this.AgydepartList),this.setCodes("departreason",this.DiffCauseList)):this.$message.error("未能正确获取下拉菜单")},setCodes:function(e,t){var a=this;this.codes[e]&&Object.keys(this.codes[e]).forEach((function(r){t.push({label:a.codes[e][r],value:r})}))},handleSizeChange:function(e){this.page.pageSize=e,this.handleQuery()},handleCurrentChange:function(e){this.page.currentPage=e,this.handleQuery()},selectEnable:function(e){return"1"===e["agentStateCom"]},handleSelectChange:function(e){this.selected=[];var t,a=Object(n["a"])(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;this.selected.push(r.agentCode)}}catch(o){a.e(o)}finally{a.f()}},LeaveAddDialogVisible:function(){this.$bus.$emit("ADD_DIALOG")},LeaveAddDialog:function(e){"1"===e.agentStateCom?this.$message.error("未提交审核不可修改"):"4"===e.agentStateCom?this.$message.error("审核已通过不可修改"):this.$bus.$emit("MODIFY_DIALOG",e)},Submit:function(){var e=this;c["c"](this.selected).then((function(t){0===t.code&&(e.$message.success("提交成功"),e.handleQuery())}))},resetForm:function(){this.$refs["form"].resetFields(),this.table=[]},getCurAgentGrade:function(){var e=this;s["b"]().then((function(t){e.agentGradeList=t.list}))}}},w=D,k=(a("93a2"),Object(g["a"])(w,r,o,!1,null,"ca01133a",null));t["default"]=k.exports},"93a2":function(e,t,a){"use strict";a("a902")},"98a9":function(e,t,a){var r=a("90fb"),o=a("9806"),n=r("iterator"),l=Array.prototype;e.exports=function(e){return void 0!==e&&(o.Array===e||l[n]===e)}},"98e0":function(e,t,a){var r=a("1c8b"),o=a("e62b"),n=a("f471"),l=!n((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:l},{from:o})},"9b11":function(e,t,a){var r=a("6d51");r("iterator")},a902:function(e,t,a){},b60f:function(e,t,a){var r=a("2a91"),o=a("9806"),n=a("90fb"),l=n("iterator");e.exports=function(e){if(void 0!=e)return e[l]||e["@@iterator"]||o[r(e)]}},bbbc:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"d",(function(){return n})),a.d(t,"c",(function(){return l})),a.d(t,"f",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"g",(function(){return f}));var r=a("b775");function o(){return Object(r["a"])({url:"/get/grade",method:"post"})}function n(){return Object(r["a"])({url:"/get/managecom",method:"post"})}function l(e){return Object(r["a"])({url:"/get/gradeteam",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/rank/alter",method:"post",data:e})}function s(e,t){var a="/test/GradeQuery",o="?limit="+t.pageSize+"&page="+t.currentPage;return Object(r["a"])({url:a+o,method:"post",data:e})}function c(){return Object(r["a"])({url:"/get/comresource",method:"post"})}function f(){return Object(r["a"])({url:"/get/grade",method:"post"})}},e62b:function(e,t,a){"use strict";var r=a("e349"),o=a("3553"),n=a("69c5"),l=a("98a9"),i=a("d88d"),s=a("1bbd"),c=a("b60f");e.exports=function(e){var t,a,f,u,m,d,p=o(e),g="function"==typeof this?this:Array,h=arguments.length,b=h>1?arguments[1]:void 0,v=void 0!==b,y=c(p),C=0;if(v&&(b=r(b,h>2?arguments[2]:void 0,2)),void 0==y||g==Array&&l(y))for(t=i(p.length),a=new g(t);t>C;C++)d=v?b(p[C],C):p[C],s(a,C,d);else for(u=y.call(p),m=u.next,a=new g;!(f=m.call(u)).done;C++)d=v?n(u,b,[f.value,C],!0):f.value,s(a,C,d);return a.length=C,a}},e8b8:function(e,t,a){"use strict";a.d(t,"d",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"a",(function(){return s})),a.d(t,"f",(function(){return c}));var r=a("b775");function o(e,t){var a="/search/return",o="?limit="+t.pageSize+"&page="+t.currentPage;return Object(r["a"])({url:a+o,method:"post",data:e})}function n(){return Object(r["a"])({url:"/returnMes/com4Info",method:"post"})}function l(e){var t="/returnMes/groupInfo",a="?manageCode="+e;return Object(r["a"])({url:t+a,method:"post"})}function i(e){var t="/returnMes/managerInfo",a="?branchAttr="+e;return Object(r["a"])({url:t+a,method:"post"})}function s(e){return Object(r["a"])({url:"/agent/change",method:"post",data:e})}function c(){return Object(r["a"])({url:"/get/comresource",method:"post"})}},f471:function(e,t,a){var r=a("90fb"),o=r("iterator"),n=!1;try{var l=0,i={next:function(){return{done:!!l++}},return:function(){n=!0}};i[o]=function(){return this},Array.from(i,(function(){throw 2}))}catch(s){}e.exports=function(e,t){if(!t&&!n)return!1;var a=!1;try{var r={};r[o]=function(){return{next:function(){return{done:a=!0}}}},e(r)}catch(s){}return a}},f713:function(e,t,a){"use strict";a.d(t,"a",(function(){return o})),a.d(t,"c",(function(){return n})),a.d(t,"b",(function(){return l})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return s}));var r=a("b775");function o(e,t){var a="/dismiss/query",o="?limit="+t.pageSize+"&page="+t.currentPage;return Object(r["a"])({url:a+o,method:"post",data:e})}function n(e){return Object(r["a"])({url:"/dimission/audit",method:"post",data:e})}function l(e){return Object(r["a"])({url:"/Dimission/Dimission",method:"post",data:e})}function i(e){return Object(r["a"])({url:"/depart/Modify",method:"post",data:e})}function s(e){return Object(r["a"])({url:"/insertDimission/insertDimission",method:"post",data:e})}}}]);