(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-41e4e17d"],{"17c1":function(e,t,a){},2469:function(e,t,a){"use strict";a("17c1")},"650e":function(e,t,a){},"752e":function(e,t,a){"use strict";a("650e")},9884:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("h4",[e._v("职级调整")]),a("el-form",{attrs:{model:e.form,rules:e.rules,"label-width":"180px"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"管理机构",prop:"manageCom"}},[a("el-cascader",{ref:"elcascader",staticStyle:{width:"100%"},attrs:{options:e.options,"show-all-levels":!1,props:{expandTrigger:"hover",checkStrictly:!0},clearable:""},on:{change:e.changeVal},model:{value:e.form.manageCom,callback:function(t){e.$set(e.form,"manageCom",t)},expression:"form.manageCom"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"团队代码"}},[a("el-input",{attrs:{placeholder:"请输入团队代码",clearable:""},model:{value:e.form.agentGroup,callback:function(t){e.$set(e.form,"agentGroup",t)},expression:"form.agentGroup"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"团队名称"}},[a("el-input",{attrs:{placeholder:"请输入团队名称",clearable:""},model:{value:e.form.branchName,callback:function(t){e.$set(e.form,"branchName",t)},expression:"form.branchName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"代理人代码"}},[a("el-input",{attrs:{placeholder:"请输入代理人代码",clearable:""},model:{value:e.form.agentCode,callback:function(t){e.$set(e.form,"agentCode",t)},expression:"form.agentCode"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"代理人姓名"}},[a("el-input",{attrs:{placeholder:"请输入代理人姓名",clearable:""},model:{value:e.form.agentName,callback:function(t){e.$set(e.form,"agentName",t)},expression:"form.agentName"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号",prop:"phone"}},[a("el-input",{attrs:{placeholder:"请输入手机号",clearable:""},model:{value:e.form.phone,callback:function(t){e.$set(e.form,"phone",t)},expression:"form.phone"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"证件号码"}},[a("el-input",{attrs:{placeholder:"请输入证件号码",clearable:""},model:{value:e.form.idNo,callback:function(t){e.$set(e.form,"idNo",t)},expression:"form.idNo"}})],1)],1),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"当前职级"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.form.agentGrade,callback:function(t){e.$set(e.form,"agentGrade",t)},expression:"form.agentGrade"}},e._l(e.list.agentGrade,(function(t,r){return a("el-option",{key:r,attrs:{value:t.gradecode,label:t.gradename}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.gradecode))]),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.gradename))])])})),1)],1)],1)],1),a("el-row",[a("el-form-item",[a("el-col",{staticStyle:{"text-align":"left","margin-top":"1rem"}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.hello}},[e._v("查询")])],1)],1)],1)],1),a("el-divider"),a("Table")],1)},o=[],l=(a("159b"),function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-table",{attrs:{data:e.list,stripe:"",border:"",fit:"",height:"300"}},[a("el-table-column",{attrs:{label:"人员工号",prop:"agentCode"}}),a("el-table-column",{attrs:{label:"人员姓名",prop:"agentName"}}),a("el-table-column",{attrs:{label:"分工司",prop:"manageCom3"}}),a("el-table-column",{attrs:{label:"中心支公司",prop:"manageCom4"}}),a("el-table-column",{attrs:{label:"团队代码",prop:"branchAttr"}}),a("el-table-column",{attrs:{label:"团队名称",prop:"branchName"}}),a("el-table-column",{attrs:{label:"入司日期",prop:"employDate"}}),a("el-table-column",{attrs:{label:"人员状态",prop:"agentStateName"}}),a("el-table-column",{attrs:{label:"合同类型",prop:"contractTypeName"}}),a("el-table-column",{attrs:{label:"职级",prop:"agentGradeName"}}),a("el-table-column",{attrs:{label:"操作",width:"100px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return e.showModifyDialog(t.row)}}},[e._v("职级调整")])]}}])})],1),a("div",{staticClass:"block",staticStyle:{"text-align":"right","margin-top":"1rem"}},[a("el-pagination",{attrs:{"current-page":e.page.currentPage,"page-sizes":[10,20,50,100,200,500],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),a("GroupModifyDialog1")],1)}),n=[],s=a("5530"),i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"职级调整",visible:e.editDialogVisible,width:"90%","before-close":e.editDialogClosed},on:{"update:visible":function(t){e.editDialogVisible=t}}},[a("span",[a("el-form",{ref:"form",attrs:{model:e.form,rules:e.rules,"label-width":"180px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"人员代码",prop:"agentCode"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"text",disabled:""},model:{value:e.form.agentCode,callback:function(t){e.$set(e.form,"agentCode",t)},expression:"form.agentCode"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"人员姓名",prop:"agentName"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"text",disabled:""},model:{value:e.form.agentName,callback:function(t){e.$set(e.form,"agentName",t)},expression:"form.agentName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"团队代码",prop:"agentGroup"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"text",disabled:""},model:{value:e.form.agentGroup,callback:function(t){e.$set(e.form,"agentGroup",t)},expression:"form.agentGroup"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"团队名称",prop:"branchName"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"text",disabled:""},model:{value:e.form.branchName,callback:function(t){e.$set(e.form,"branchName",t)},expression:"form.branchName"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"人员状态"}},[a("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.form.agentState,callback:function(t){e.$set(e.form,"agentState",t)},expression:"form.agentState"}},[a("el-option",{attrs:{label:"在职",value:"01"}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v("01")]),a("span",{staticStyle:{float:"right"}},[e._v("在职")])]),a("el-option",{attrs:{label:"二次入司",value:"02"}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v("02")]),a("span",{staticStyle:{float:"right"}},[e._v("二次入司")])]),a("el-option",{attrs:{label:"离职",value:"03"}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v("03")]),a("span",{staticStyle:{float:"right"}},[e._v("离职")])])],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"当前职级",prop:"curAgentGrade"}},[a("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择",disabled:""},model:{value:e.form.curAgentGrade,callback:function(t){e.$set(e.form,"curAgentGrade",t)},expression:"form.curAgentGrade"}},e._l(e.curAgentGrade,(function(t){return a("el-option",{key:t.gradecode,attrs:{value:t.gradecode,label:t.gradename}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.gradecode))]),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.gradename))])])})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"目标职级",prop:"targetAgentGrade"}},[a("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择"},on:{change:e.getTeam},model:{value:e.form.targetAgentGrade,callback:function(t){e.$set(e.form,"targetAgentGrade",t)},expression:"form.targetAgentGrade"}},e._l(e.curAgentGrade,(function(t){return a("el-option",{key:t.gradecode,attrs:{value:t.gradecode,label:t.gradename}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.gradecode))]),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.gradename))])])})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"目标团队架构",prop:"targetBranchCode"}},[a("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择",disabled:e.judge},nativeOn:{click:function(t){return e.getTargetBranch(t)}},model:{value:e.form.targetBranchCode,callback:function(t){e.$set(e.form,"targetBranchCode",t)},expression:"form.targetBranchCode"}},e._l(e.targetBranchCode,(function(t){return a("el-option",{key:t.groupcode,attrs:{value:t.groupcode,label:t.groupname}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.groupcode))]),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.groupname))])])})),1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"目标四级管理机构",prop:"targetManageCom"}},[a("el-select",{staticStyle:{width:"60%"},attrs:{placeholder:"请选择",disabled:e.judgetarget},on:{change:e.clearTar},model:{value:e.form.targetManageCom,callback:function(t){e.$set(e.form,"targetManageCom",t)},expression:"form.targetManageCom"}},e._l(e.targetManageCom,(function(t){return a("el-option",{key:t.value,attrs:{value:t.value,label:t.label}},[a("span",{staticStyle:{float:"left",color:"#8492a6","font-size":"13px"}},[e._v(e._s(t.value))]),a("span",{staticStyle:{float:"right"}},[e._v(e._s(t.label))])])})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"合同类型",prop:"contractType"}},[a("el-select",{staticStyle:{width:"60%"},attrs:{disabled:""},model:{value:e.form.contractType,callback:function(t){e.$set(e.form,"contractType",t)},expression:"form.contractType"}},[a("el-option",{attrs:{label:"合同制",value:"02"}})],1)],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"入司日期",prop:"employDate"}},[a("el-date-picker",{staticStyle:{width:"60%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期",disabled:""},model:{value:e.form.employDate,callback:function(t){e.$set(e.form,"employDate",t)},expression:"form.employDate"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"调整日期",prop:"alterDate"}},[a("el-date-picker",{staticStyle:{width:"60%"},attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.form.alterDate,callback:function(t){e.$set(e.form,"alterDate",t)},expression:"form.alterDate"}})],1)],1)],1),a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"调整原因",prop:"alterCause"}},[a("el-input",{staticStyle:{width:"60%"},attrs:{type:"text"},model:{value:e.form.alterCause,callback:function(t){e.$set(e.form,"alterCause",t)},expression:"form.alterCause"}})],1)],1),a("el-col",{attrs:{span:12}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"secondary"},on:{click:function(t){e.editDialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.saveAdjust}},[e._v("保 存")])],1)])],1)},c=[],m=a("b775");function g(){return Object(m["a"])({url:"/get/grade",method:"post"})}function u(){return Object(m["a"])({url:"/get/managecom",method:"post"})}function d(e){return Object(m["a"])({url:"/get/gradeteam",method:"post",data:e})}function f(e){return Object(m["a"])({url:"/rank/alter",method:"post",data:e})}function p(e,t){var a="/test/GradeQuery",r="?limit="+t.pageSize+"&page="+t.currentPage;return Object(m["a"])({url:a+r,method:"post",data:e})}function h(){return Object(m["a"])({url:"/get/comresource",method:"post"})}function b(){return Object(m["a"])({url:"/get/grade",method:"post"})}var v={name:"PersonEdit",data:function(){return{minComCode:"",aBranchCode:"",BranchCodeData:{},curAgentGrade:[],targetManageCom:[],targetBranchCode:[],form:{agentCode:"",agentName:"",agentGroup:"",branchName:"",agentState:"",curAgentGrade:"",targetAgentGrade:"",targetBranchCode:"",targetManageCom:"",employDate:"",alterDate:"",alterCause:""},rules:{targetAgentGrade:[{required:!0,message:"请选择目标职级",trigger:"blur"}],targetBranchCode:[{required:!0,message:"请选择目标团队架构",trigger:"blur"}],targetManageCom:[{required:!0,message:"请选择目标四级管理机构",trigger:"blur"}],alterDate:[{required:!0,message:"请选择调整日期",trigger:"blur"}],alterCause:[{required:!0,message:"请输入调整原因",trigger:"blur"}]},editDialogVisible:!1,judge:!1,judgetarget:!1}},created:function(){this.getCurAgentGrade(),this.getTargetManageCom()},mounted:function(){var e=this;this.$bus.$on("agent1",(function(t){e.form=Object(s["a"])({},t),e.$set(e.form,"targetBranchCode",""),e.$set(e.form,"targetManageCom",""),e.form.agentGrade=void 0,e.$set(e.form,"curAgentGrade",t.agentGrade),e.editDialogVisible=!0,e.minComCode=t.comCode4,e.aBranchCode=t.agentGroup}))},beforeDestroy:function(){this.$bus.$off("agent1")},methods:{editDialogClosed:function(){this.$refs.form.resetFields(),this.editDialogVisible=!1},getCurAgentGrade:function(){var e=this;g().then((function(t){e.curAgentGrade=t.list}))},getTargetManageCom:function(){var e=this;u().then((function(t){e.targetManageCom=t.list4})).catch((function(){}))},getTeam:function(){var e=this;if(this.form.targetAgentGrade.substr(0,2)===this.form.curAgentGrade.substr(0,2)){this.judge=!0,this.judgetarget=!0,this.form.targetBranchCode=this.form.agentGroup,this.form.targetManageCom=this.minComCode;var t={oldgradecode:this.form.curAgentGrade,nowgradecode:this.form.targetAgentGrade,agentcode:this.form.agentCode,comecode:this.form.targetManageCom};d(t).then((function(t){e.targetBranchCode=t.list,"success"!==t.msg&&e.$message.success(t.msg)}))}else this.judge=!1,this.judgetarget=!1,this.$set(this.form,"targetManageCom",""),this.$set(this.form,"targetBranchCode","")},clearTar:function(){this.$set(this.form,"targetBranchCode","")},getTargetBranch:function(){var e=this;console.log("000000000000000000000000"),console.log(this.form.targetAgentGrade);var t={oldgradecode:this.form.curAgentGrade,nowgradecode:this.form.targetAgentGrade,agentcode:this.form.agentCode,comecode:this.form.targetManageCom};d(t).then((function(t){e.targetBranchCode=t.list,"success"!==t.msg&&e.$message.success(t.msg)}))},saveAdjust:function(){var e=this;this.form.curAgentGrade===this.form.targetAgentGrade?this.$message("当前职级与目标职级一致，无法调整"):f(this.form).then((function(t){0===t.code?(e.$message.success("调整成功"),e.$bus.$emit("refreshAgent"),e.editDialogVisible=!1):e.$message.error("调整失败")}))}}},C=v,y=a("2877"),$=Object(y["a"])(C,i,c,!1,null,"7ced5420",null),G=$.exports,S={name:"GroupTable",components:{GroupModifyDialog1:G},data:function(){return{list:[],page:{currentPage:1,totalCount:0,pageSize:10}}},mounted:function(){var e=this;this.$bus.$on("something",(function(t){e.list=[];var a=Object(s["a"])({},t);a.manageCom=a.manageCom[a.manageCom.length-1],p(a,{pageSize:e.page.pageSize,currentPage:e.page.currentPage}).then((function(t){e.list=t.list,e.page.totalCount=t.totalCount,e.$message.success("查询完毕")}))})),this.$bus.$on("something1",(function(){e.list=[],e.$message.error("请先选择管理机构")}))},beforeDestroy:function(){this.$bus.$off("something"),this.$bus.$off("something1")},methods:{showModifyDialog:function(e){this.$bus.$emit("agent1",e)},handleSizeChange:function(e){this.page.pageSize=e,this.$bus.$emit("refreshAgent")},handleCurrentChange:function(e){this.page.currentPage=e,this.$bus.$emit("refreshAgent")}}},x=S,_=(a("2469"),Object(y["a"])(x,l,n,!1,null,"98cb28f6",null)),w=_.exports,k=a("61f7"),A={name:"",components:{Table:w},data:function(){return{form:{manageCom:"",agentGroup:"",branchName:"",agentCode:"",agentName:"",phone:"",idNo:"",agentGrade:""},list:{agentGrade:""},rules:{phone:[{validator:k["j"],trigger:"blur"}],manageCom:[{required:!0,message:"请选择管理机构",trigger:"blur"}]},options:[]}},created:function(){var e=this;h().then((function(t){e.options.push(t.result)})),b().then((function(t){e.list.agentGrade=t.list}))},mounted:function(){var e=this;this.$bus.$on("refreshAgent",(function(){e.hello()})),setInterval((function(){document.querySelectorAll(".el-cascader-node__label").forEach((function(e){e.onclick=function(){this.previousElementSibling&&this.previousElementSibling.click()}}))}),1e3)},beforeDestroy:function(){this.$bus.$off("refreshAgent")},methods:{hello:function(){void 0!==this.form.manageCom&&""!==this.form.manageCom&&0!==this.form.manageCom.length?this.$bus.$emit("something",this.form):this.$bus.$emit("something1")},changeVal:function(){var e,t=this;clearTimeout(e),e=setTimeout((function(){t.$refs.elcascader.dropDownVisible=!1}),300)}}},D=A,N=(a("752e"),Object(y["a"])(D,r,o,!1,null,"11ed59ce",null));t["default"]=N.exports}}]);